<h1 class="text-center pt-5" style="font-size: 48px;">Countries</h1>
<form [formGroup]="searchForm">
  <div class="d-flex justify-content-between mx-4 mt-3">
    <div class="w-100 d-flex justify-content-center">
      <mat-form-field id="searchFormField" [formControl]="queryInput" appearance="outline" style="width: 40%;"  >
        <mat-label>Search</mat-label>
        <input matInput placeholder="Enter country name.. " [formControl]="myControl" [matAutocomplete]="auto"
                style="color: black">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let state of filteredOptions | async" [value]="state.name">
            <img alt="" class="example-option-img me-2" [src]="state.flag" height="25" width="40">
            <span>{{state.name}}</span> |
            <small>Population: {{displayPopulation(state.population)}}</small>
          </mat-option>
        </mat-autocomplete>
        <mat-icon matPrefix>search</mat-icon>
        <mat-icon  (click)="$event.stopPropagation(); showAdvanced()" matSuffix>{{advancedSearchIcon}}</mat-icon>
      </mat-form-field>
    </div>
  </div>

  <div id="advancedSearch" class="d-flex justify-content-center collapsible"  [@collapse]="collapsed" style="width: 100%;overflow: hidden">
    <div class="mx-2 d-inline-block">
    <p class="mb-0" style="text-align: center">Continent</p>
    <div class="divider"></div>
    <div>
      <mat-form-field appearance="outline">
        <mat-label>Continents</mat-label>
        <mat-select [formControl]="continentsSelected" (selectionChange)="filterCountries()" multiple>
          <mat-select-trigger>
            {{continentsSelected.value?.[0] || ''}}
            <span *ngIf="(continentsSelected.value?.length || 0) > 1" class="example-additional-selection">
        (+{{(continentsSelected.value?.length || 0) - 1}} {{continentsSelected.value?.length === 2 ? 'other' : 'others'}})
      </span>
          </mat-select-trigger>
          <mat-option *ngFor="let continent of continents" [value]="continent">{{continent}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    </div>
    <div class="mx-2">
      <p class="mb-0" style="text-align: center">Population (in millions)</p>
      <div class="divider"></div>
      <div>
        <mat-form-field id="fromPopulation" appearance="outline" style="width: 100%;"  >
          <mat-label>Min</mat-label>
          <input matInput [formControl]="minPopulationInput" placeholder="Minimum population " style="color: black">
        </mat-form-field>
      </div>
      <div>
        <mat-form-field id="toPopulation" appearance="outline" style="width: 100%;"  >
          <mat-label>Max</mat-label>
          <input matInput [formControl]="maxPopulationInput" placeholder="Maximum population " style="color: black">
        </mat-form-field>
      </div>
    </div>
    <div class="mx-2">
      <p class="mb-0" style="text-align: center">Area (in millions m<sup>2</sup>)</p>
      <div class="divider"></div>
      <div>
        <mat-form-field id="fromArea" appearance="outline" style="width: 100%;"  >
          <mat-label>Min</mat-label>
          <input matInput placeholder="Minimum area " style="color: black">
        </mat-form-field>
      </div>
      <div>
        <mat-form-field id="toArea" appearance="outline" style="width: 100%;"  >
          <mat-label>Max</mat-label>
          <input matInput placeholder="Maximum area " style="color: black">
        </mat-form-field>
      </div>
    </div>
    <div class="mx-2 d-inline-block">
      <p class="mb-0" style="text-align: center">Independency</p>
      <div class="divider"></div>
      <div>
          <p><mat-checkbox >Independent</mat-checkbox></p>
          <p><mat-checkbox >Not Independent</mat-checkbox></p>
      </div>
    </div>
  </div>
  <div class="w-100 d-flex justify-content-end px-5 mt-4"  >
    <div>
    <mat-form-field id="sortCriteriumFormField" appearance="outline" style="color: black;">
      <mat-label>Sort Criterium</mat-label>
      <mat-select [formControl]="sortInput"  (selectionChange)="sortCountries()">
        <mat-option *ngFor="let criteria of criteriums" [value]="criteria">
          {{criteria}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-icon id="sortDirectionIcon" (click)="changeDirection();sortCountries()" class="mx-3" style="vertical-align: middle">{{sortDirection}}</mat-icon>
    </div>
  </div>
</form>
<div class="d-flex flex-wrap justify-content-center mx-5">
    <app-country-card class="mx-3 my-3" *ngFor="let state of filteredCountries" [country]="state"></app-country-card>
</div>
